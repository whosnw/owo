<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Curricular IQ</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #121212;
            --oro-rayos: linear-gradient(90deg, #8a6628, #fcf6ba, #bf953f, #fcf6ba, #8a6628);
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-dark);
            color: #fff; margin: 0; padding: 20px;
        }

        /* --- DISEÃ‘O DE BARRAS DE AVANCE (LILA Y CELESTE) --- */
        /* Aplicado a scrollbar horizontal y vertical con el mismo diseÃ±o */
        ::-webkit-scrollbar { width: 12px; height: 12px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb {
            background: var(--oro-rayos);
            border-radius: 10px;
            box-shadow: 0 0 15px #bf953f;
        }

        /* --- CONTADOR DE CRÃ‰DITOS --- */
        .counter-container {
            width: fit-content; margin: 20px auto 40px; padding: 3px;
            background: var(--oro-rayos); border-radius: 10px;
            box-shadow: 0 0 25px rgba(191, 149, 63, 0.4);
        }
        .counter-inner {
            background: #121212; padding: 15px 40px; border-radius: 8px;
            display: flex; align-items: center; gap: 15px;
        }
        #total-credits { font-size: 2.2em; font-weight: 700; color: #fff; }

        /* --- CONTENEDOR DE MALLA --- */
        .malla-wrapper {
            display: flex; gap: 30px; padding: 20px;
            overflow-x: auto; /* Barra inferior lila */
            overflow-y: hidden;
        }

        .ciclo-col { min-width: 260px; }
        
        .ciclo-titulo {
            background: #1a1a1a; padding: 12px; border-radius: 8px;
            text-align: center; font-weight: 700; margin-bottom: 20px;
            border: 1px solid #333; color: #e2c17c;
        }

        /* --- DISEÃ‘O DE CURSOS ORIGINAL --- */
        .curso {
            background: #1a1a1a; border-radius: 15px; padding: 20px;
            margin-bottom: 15px; border: 1px solid #333;
            transition: 0.3s ease; cursor: pointer;
        }

        /* Estado Desbloqueado/Aprobado (Dorado resplandeciente) */
        .curso.approved {
            background: linear-gradient(145deg, #bf953f, #8a6628);
            border: 1px solid #fff;
            box-shadow: 0 0 20px rgba(191, 149, 63, 0.6);
        }

        /* TEXTO BLANCO EN CURSOS APROBADOS */
        .curso.approved .codigo, 
        .curso.approved .nombre, 
        .curso.approved .creditos {
            color: #ffffff !important;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .codigo { font-size: 0.8em; color: #888; font-weight: 700; }
        .nombre { display: block; margin: 8px 0; font-size: 0.95em; font-weight: 700; }
        .creditos { font-size: 0.8em; color: #bf953f; display: flex; align-items: center; gap: 5px; }

        .locked { opacity: 0.2; pointer-events: none; filter: grayscale(1); }
    </style>
</head>
<body>

    <h1 style="text-align:center; color:#bf953f;">MI AVANCE ACADÃ‰MICO</h1>

    <div class="counter-container">
        <div class="counter-inner">
            <span style="color:#bf953f; font-weight:700;">CRÃ‰DITOS TOTALES:</span>
            <div id="total-credits">0</div>
        </div>
    </div>

    <div class="malla-wrapper" id="malla-container">
        </div>

    <script>
        // Datos extraÃ­dos del PDF para IngenierÃ­a QuÃ­mica [cite: 23, 49, 78]
        const dataMalla = {
            "Ciclo 01": [
                { id: "BD101", n: "DIBUJO EN INGENIERIA I", c: 2, r: [] },
                { id: "BF101", n: "FISICA I", c: 5, r: [] },
                { id: "BMA01", n: "CALCULO DIFERENCIAL", c: 5, r: [] },
                { id: "BMA03", n: "ALGEBRA LINEAL", c: 4, r: [] },
                { id: "BQU01", n: "QUIMICA I", c: 5, r: [] },
                { id: "BRC01", n: "REDACCION Y COMUNICACION", c: 2, r: [] }
            ],
            "Ciclo 02": [
                { id: "BD102", n: "DIBUJO EN INGENIERIA II", c: 3, r: ["BD101"] },
                { id: "BF102", n: "FISICA II", c: 5, r: ["BF101"] },
                { id: "BMA02", n: "CALCULO INTEGRAL", c: 5, r: ["BMA01"] },
                { id: "BMA04", n: "MATEMATICAS BASICAS", c: 4, r: ["BMA03"] },
                { id: "BQU02", n: "QUIMICA II", c: 5, r: ["BQU01"] }
            ],
            "Ciclo 03": [
                { id: "BEF01", n: "ETICA Y FILOSOFIA POLITICA", c: 2, r: [] },
                { id: "BEG01", n: "ECONOMIA GENERAL", c: 3, r: [] },
                { id: "BF103", n: "FISICA III", c: 5, r: ["BF102"] },
                { id: "BIC01", n: "INTRODUCCION A LA COMPUTACION", c: 2, r: [] },
                { id: "BMA05", n: "MATEMATICAS SUPERIOR I", c: 4, r: ["BMA02", "BMA04"] },
                { id: "QU216", n: "QUIMICA INORGANICA", c: 5, r: ["BQU02"] }
            ],
            "Ciclo 04": [
                { id: "BF104", n: "TOPICOS ESPECIALES EN FISICA", c: 3, r: ["BF103"] },
                { id: "BMA06", n: "MATEMATICAS SUPERIOR II", c: 4, r: ["BMA05"] },
                { id: "EP308", n: "ECONOMIA Y ORGANIZACION DE LA EMPRESA", c: 3, r: ["BEG01"] },
                { id: "MA613", n: "ESTADISTICA APLICADA", c: 4, r: ["BMA04"] },
                { id: "MA713", n: "PROGRAMACION DIGITAL", c: 3, r: ["BIC01"] },
                { id: "QU427", n: "FISICO QUIMICA I", c: 5, r: ["BF103", "BQU02"] }
            ],
            "Ciclo 05": [
                { id: "PI111", n: "BALANCE DE MATERIA Y ENERGIA", c: 3, r: ["QU427"] },
                { id: "PI524", n: "METODOS NUMERICOS PARA IQ", c: 4, r: ["BMA06"] },
                { id: "QU328", n: "QUIMICA ORGANICA I", c: 5, r: ["QU427"] },
                { id: "QU428", n: "FISICO QUIMICA II", c: 5, r: ["QU427"] },
                { id: "QU518", n: "ANALISIS QUIMICO", c: 4, r: ["QU216"] }
            ],
            "Ciclo 06": [
                { id: "BIE01", n: "IDIOMA EXTRANJERO", c: 2, r: [] },
                { id: "BRN01", n: "REALIDAD NACIONAL", c: 3, r: [] },
                { id: "EC618", n: "MECANICA Y RESISTENCIA DE MAT.", c: 3, r: ["BF104", "BMA06"] },
                { id: "EE103", n: "CIRCUITOS ELECTRICOS", c: 3, r: ["BF103", "BMA05"] },
                { id: "PI140", n: "FENOMENOS DE TRANSPORTE", c: 3, r: ["BMA06", "PI111"] },
                { id: "PI216", n: "TERMODINAMICA PARA IQ I", c: 3, r: ["PI111", "QU428"] },
                { id: "QU338", n: "QUIMICA ORGANICA II", c: 5, r: ["QU328"] }
            ],
            "Ciclo 07": [
                { id: "PA113", n: "INGENIERIA DE METODOS I", c: 4, r: ["MA613"] },
                { id: "PA714", n: "INVESTIGACION DE OPERACIONES I", c: 3, r: ["MA613", "MA713"] },
                { id: "PI142", n: "TRANSFERENCIA DE CANT. MOV.", c: 3, r: ["PI140"] },
                { id: "PI217", n: "TERMODINAMICA PARA IQ II", c: 3, r: ["PI216", "PI524"] },
                { id: "PI318", n: "INDUSTRIA DE PROCESOS QUIMICOS", c: 5, r: ["PI140"] },
                { id: "PI514", n: "CIENCIAS DE LOS MATERIALES", c: 2, r: ["QU518"] },
                { id: "PI520", n: "RECURSOS QUIMICOS BIODIVERSIDAD", c: 3, r: ["QU338", "QU518"] }
            ],
            "Ciclo 08": [
                { id: "BAE01", n: "ACTIVIDADES EXTRACURRICULARES", c: 1, r: [] },
                { id: "EP818", n: "COSTOS Y PRESUPUESTOS", c: 3, r: ["EP308", "PA714"] },
                { id: "PI1143", n: "TRANSFERENCIA DE CALOR", c: 3, r: ["PI142"] },
                { id: "PI1144", n: "TRANSFERENCIA DE MASA", c: 3, r: ["PI142"] },
                { id: "PI1146", n: "OPERACIONES EN IQ I", c: 3, r: ["PI142"] },
                { id: "PI225", n: "CINETICA Y DISEÃ‘O REACTORES I", c: 3, r: ["PI217"] },
                { id: "PI521", n: "INTRODUCCION A LA BIOINGENIERIA", c: 3, r: ["PI520"] }
            ],
            "Ciclo 09": [
                { id: "PI1135", n: "LAB. DE OPERACIONES UNITARIAS I", c: 2, r: ["PI1143", "PI1146"] },
                { id: "PI1365", n: "POLIMEROS I", c: 3, r: ["QU338"] },
                { id: "PI1415", n: "INSTRUMENTOS DE CONTROL", c: 3, r: ["EE103", "PI1144"] },
                { id: "PI1510", n: "ECONOMIA DE PROCESOS", c: 3, r: ["EP818", "PI1144"] },
                { id: "PI1555", n: "SEGURIDAD EN PROCESOS QUIMICOS", c: 3, r: ["PI1143", "PI1144"] },
                { id: "PI911", n: "GESTION TECNOLOGICA", c: 4, r: [] },
                { id: "QT714", n: "TALLER DE PROYECTO INVESTIGACION", c: 2, r: [] }
            ],
            "Ciclo 10": [
                { id: "PA136", n: "PLANEAMIENTO Y CONTROL PROD.", c: 4, r: ["PA113", "PA714"] },
                { id: "PI1136", n: "LAB. DE OPERACIONES UNITARIAS II", c: 2, r: ["PI1135", "PI1144"] },
                { id: "PI1426", n: "SIMULACION Y CONTROL PROCESOS", c: 4, r: ["PI225", "PI1415"] },
                { id: "PI1525", n: "DISEÃ‘O DE PLANTAS", c: 4, r: ["PI1415", "PI1510"] },
                { id: "QT715", n: "TALLER DE INVESTIGACION", c: 2, r: ["QT714"] },
                { id: "XP100", n: "PRACTICAS PRE-PROF. I", c: 1, r: [] },
                { id: "XP200", n: "PRACTICAS PRE-PROF. II", c: 2, r: [] }
            ]
        };

        let cursados = JSON.parse(localStorage.getItem('user_malla_iq')) || {};

        function checkRequisitos(reqs) {
            return reqs.every(r => cursados[r]);
        }

        function render() {
            const cont = document.getElementById('malla-container');
            cont.innerHTML = '';
            let totalCred = 0;

            for (let ciclo in dataMalla) {
                const col = document.createElement('div');
                col.className = 'ciclo-col';
                col.innerHTML = `<div class="ciclo-titulo">${ciclo}</div>`;

                dataMalla[ciclo].forEach(curso => {
                    const isApp = cursados[curso.id];
                    const isLock = !checkRequisitos(curso.r);
                    
                    const card = document.createElement('div');
                    card.className = `curso ${isApp ? 'approved' : ''} ${isLock ? 'locked' : ''}`;
                    card.innerHTML = `
                        <div class="codigo">${curso.id}</div>
                        <div class="nombre">${curso.n}</div>
                        <div class="creditos">ðŸ”¥ ${curso.c} CRÃ‰DITOS</div>
                    `;

                    card.onclick = () => {
                        if (isApp) delete cursados[curso.id];
                        else cursados[curso.id] = true;
                        localStorage.setItem('user_malla_iq', JSON.stringify(cursados));
                        render();
                    };

                    col.appendChild(card);
                    if (isApp) totalCred += curso.c;
                });
                cont.appendChild(col);
            }
            document.getElementById('total-credits').innerText = totalCred;
        }

        render();
    </script>
</body>
</html>
